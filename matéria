\\usuario: laboratorio@grad
\\senha: unaerp

CREATE TABLESPACE "TBLS5W_768377"
DATAFILE 'C:\APP\ORACLE\ORADATA\GRAD\DATAFILE\TBLS5W_768377.DBF'
SIZE 10M
;

\\ SELECT TABLESPACE_NAME FROM DBA_TABLESPACE lista o nome dos tablespaces de um BD

\\ DESCRIBE ou DESC mostra a estrutura de uma tabela
\\ SELECT selecionar/mostrar registros

\\ Alterar o tamanho de um tablespace
\\1. redimensionando o datafile
ALTER DATABASE
DATAFILE 'caminho\nome do datafile.dbf'
RESIZE novo_tamanho;

\\2. Adicionando um novo datafile
ALTER TABLESPACE " "nome do tablespace"
ADD DATAFILE 'caminho/nome do novo datafile.dbf'
SIZE tamanho;

\\Exemplo:
\\adicionando um novo datafile
ALTER TABLESPACE 'TBLS5W_768377"
ADD DATAFILE

\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
\\17/08/2023

CREATE USER "US_768377"
IDENTIFIED BY "768377"
DEFAULT TABLESPACE "TBLS5W_768377"
TEMPORARY TABLESPACE "TEMP"
PROFILE DEFAULT
ACCOUNT UNLOCK;

\\atribuir os direitos de criação
GRANT CREATE SESSION, SELECT ANY TABLE TO "US_768377";
\\\\\
CREATE USER TESTE768377
IDENTIFIED BY "123456"
DEFAULT TABLESPACE "TBLS5W_768377"
TEMPORARY TABLESPACE "TEMP"
PROFILE DEFAULT
ACCOUNT UNLOCK;

\\\AULA DO DIA 31/08/2023

CREATE TABLE DISCIPLINA
(
COD_DISCIPLINA NUMBER(6),
NOM_DISCIPLINA VARCHAR2(30) NOT NULL,
CH_DISCIPLINA NUMBER(3),
CONSTRAINT PK_DISCIPLINA PRIMARY KEY (COD_DISCIPLINA)
);

CREATE TABLE ALUNO_DISCIPLINA
(
COD_DISCIPLINA NUMBER(6),
ID_ALUNO NUMBER(6),
SEM_ANO_ALU_DISC NUMBER(5),
CONSTRAINT PK_ALUNO_DISCIPLINA PRIMARY KEY (COD_DISCIPLINA, ID_ALUNO, SEM_ANO_ALU_DISC),
CONSTRAINT FK_ALUNO_DISC_ALUNO FOREIGN KEY (ID_ALUNO) REFERENCES ALUNO,
CONSTRAINT FK_ALUNO_DISC_DISC FOREIGN KEY (COD_DISCIPLINA) REFERENCES DISCIPLINA
);

\\\EXERCICIO 31/08/2023

CREATE TABLE CONDOMINIO
(
CNPJ_CONDOMINIO NUMBER(04)
NOM_CONDOMINIO VARCHAR2(40) NOT NULL
END_CONDOMINIO VARCHAR2(40)
BAI_CONDOMINIO VARCHAR2(25)
CID_CONDOMINIO VARCHAR2(35)
UF_CONDOMINIO CHAR(2)
CEP_CONDOMINIO NUMBER(8)
CONSTRAINT PK_CONDOMINIO PRIMARY KEY (CNPJ_CONDOMINIO)
);

CREATE TABLE UNIDADE
(
CNPJ_CONDOMINIO NUMBER(04)
NUM_UNIDADE NUMBER(3)
PROP_UNIDADE VARCHAR2(40) NOT NULL
CPF_PROP_UNIDADE NUMBER(11)
CONSTRAINT PK_UNIDADE PRIMARY KEY (CNPJ_CONDOMINIO, NUM_UNIDADE)
CONSTRAINT FK_UNIDADE_CONDOMINIO FOREIGN KEY (CNPJ_CONDOMINIO) REFERENCES CONDOMINIO
);

CREATE TABLE TAXA
(
NUM_TAXA NUMBER(4)
DVT_TAXA DATE
VLR_TAXA NUMBER(8,2)
CNPJ_CONDOMINIO NUMBER (04)
NUM_UNIDADE NUMBER (3)
CONSTRAINT PK_TAXA PRIMARY KEY (NUM_TAXA)
CONSTRAINT FK_TAXA_CONDOMINIO FOREIGN KEY (CNPJ_CONDOMINIO) REFERENCES CONDOMINIO
CONSTRAINT FK_TAXA_UNIDADE FOREIGN KEY (NUM_UNIDADE) REFERENCES UNIDADE
);

CREATE TABLE CONTATO_UNIDADE
(
DDD_CONTATO_UNIDADE NUMBER(2)
NUM_CONTATO_UNIDADE VARCHAR2(10)
CNPJ_CONDOMINIO NUMBER(14)
NUM_UNIDADE NUMBER(3)
CONSTRAINT PK_CONTATO_UNIDADE PRIMARY KEY (DDD_CONTATO_UNIDADE, NUM_CONTATO_UNIDADE)
CONSTRAINT FK_CONTATO_UNIDADE_CONDOMINIO FOREIGN KEY (CNPJ_CONDOMINIO) REFERENCES CONDOMINIO
CONSTRAINT FK_CONTATO_UNIDADE_UNIDADE FOREIGN KEY (NUM_UNIDADE) REFERENCES UNIDADE
);

\\\Aula dia 14/09/2023

Alteração de tabelas
ALTER TABLE - comandoutilizado para alterar a estrutura de tabelas, permitindo realizar mudanças nos atributos e nas constraints
ADD - adicionar atributos ou constraints
MODIFY - modificar atributos (tipos do atributo e/ou tamanho do espaço de armazenamento do atributo)
-DROP - excluir atributos ou constraints

Sintaxe:
ALTER TABLE "nome da tabela"
[operação: ADD | MODIFY | DROP] parâmetros de cada operação

Exemplo:
1 - Adicionar dois novos atributos na tabela ALUNO: RG_ALUNO VARCHAR2(11) E EML_ALUNO VARCHAR2(40)
ALTER TABLE "ALUNO"
ADD (RG_ALUNO VARCHAR 2 (11), EM_ALUNO VARCHAR2(4));

2 - Ajustar o tamanho do atributo EML_ALUNO (VARCHAR2(40)
ALTER TABLE "ALUNO"
MODIFY EML_ALUNO VARCHAR2(40);

3 - Adicionar uma constraint a tabela curso - chave primária atributo cod_curso
CREATE TABLE CURSO
(cod_curso NUMBER(3),
nom_curso VARCHAR2(30),
tmp_curso NUMBER(1)
);

ALTER TABLE CURSO
ADD CONSTRAINT PK_CURSO PRIMARY KEY (COD_CURSO);

4 - Modificar o atributo nom_curso para que ele seja obrigatório
ALTER TABLE "CURSO"
MODIFY nom_curso VARCHAR2(30) NOT NULL:

5 Excluir o atributo tmp_curso da tabela CURSO
ALTER TABLE "CURSO"
DROP COLUMN tmp_curso;

6 - Adicionar a data de inicio do curso (dti_curso data)
ALTER TABLE "CURSO"
ADD DTI_CURSO DATE;

7 - Excluir a chave primária da tabela CURSO
ALTER TABLE "CURSO"
DROP CONSTRAINT PK_CURSO;

8 - Adicionar o código do curso na tabela aluno e implementar a integridade referencial entre as tabelas (ALUNO E CURSO)
ALTER TABLE "ALUNO"
ADD COD_CURSO NUMBER(3);

ALTER TABLE "CURSO"
ADD CONSTRAINT PK_CURSO PRIMARY KEY(COD_CURSO);

ALTER TABLE "ALUNO"
ADD CONSTRAINT FK_ALUNO_CURSO FOREIGN KEY (COD_CURSO) REFERENCES CURSO (COD_CURSO);

Excluir/apagar tabela
DROP TABLE - é o comando usado para apagar uma tabela, contudo, a tabela não pode estar referenciada com outra tabela

Exemplo
1 - Excuir a tabela CURSO
DROP TABLE CURSO;
(*) table referenciada com a tabela aluno

ALTER TABLE ALUNO
DROP CONSTRAINT FK_ALUNO_CURSO;

DROP TABLE CURSO;

2 - Excluir a tabela TESTE
DROP TABLE TESTE;

CRIAR UMA TABELA A PARTIR DE UMA TABELA JÁ EXISTENTE
Sintaxe:
CREATE TABLE "nome da tabela"
AS SELECT atributos(s) FROM "nome da tabela"

Exemplo:
CREATE TABLE "ALUNO_FRAG"
AS SELECT ID_ALUNO, NOM_ALUNO, DTN_ALUNO
FROM ALUNO;

Se quisesse com todos os atributos
CREATE TABLE "ALUNO_FRAG"
AS SELECT * FROM ALUNO;

ALTER TABLE "ALUNO_FRAG"
ADD CONSTRAINT PK_ALUNO_FRAG PRIMARY KEY (ID_ALUNO);

/////////Aula de 21/09/2023

AUTO INCREMENTO NO ORACLE (SEQUENCE)
CRIAÇÃO DE SEQUENCE
CREATE SEQUENCE - comando utilizado para criar uma sequência (auto incremento)
Sintaxe:
CREATE SEQUENCE "nome da sequência"
START WITH n
INCREMENT BY n
MAXVALUE n
MINVALUE n
CYCLE | NOCYCLE

Exemplo:
CREATE SEQUENCE "SEQ_ALUNO"
START WITH 1 INCREMENT BY 1;

Atribuir o papel de DBA
GRANT DBA TO "NOME DO USUÁRIO"
GRANT DBA TO "US_CODIGO";

USER_SEQUENCES - tabela que armazena as sequências criadas pelo usuário
SELECT SEQUENCE_NAME FROM USER_SEQUENCE;

Manipular sequência
CURRVAL - retornar o valor atual da sequência
NEXTVAL - próximo valor para a sequência (incremento)

ALTERAR UMA SEQUÊNCIA
ALTER SEQUENCE "nome da sequência"
parâmetro(s) que deseja alterar
(*) não pode alterar o valor inicial de uma sequência

EXCLUIR UMA SEQUÊNCIA
DROP SEQUENCE "nome da sequência"



